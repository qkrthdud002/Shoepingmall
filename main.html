<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./style/header.css" rel="stylesheet">
    <link href="./style/main.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Document</title>
</head>
<body>
    <div class="scroll-bar">
    <div class="header">
        <img class='logo' src="./img/logo.png"/>
        <div class="gobox">
            <a class="go" href="login.html">로그인</a>
            <a class="go" href="register.html">회원가입</a>
        </div>
    </div>

    <br>

    <div class="search">
        <input class="searchText" type="text">
        <img class="searchImg" src="./img/검색.png">
    </div>
    <br>

    <div class="nav">
        <ul>
            <li><a class="page" href="main.html">홈</a></li>
            <li><a class="page" href="sportsShoes.html">운동화</a></li>
            <li><a class="page" href="canvas.html">캔버스</a></li>
            <li><a class="page" href="sneakers.html">스니커즈</a></li>
            <li><a class="page" href="crocs.html">크록스</a></li>
            <li><a class="page" href="sandal.html">샌들</a></li>
            <li><a class="page" href="worker.html">워커</a></li>
        </ul>
    </div>

    <img class="ad" src="./img/광고1.png">

    <div class="newPrize">
        <br>
        <a class="prize">새로나온 상품</a>

        <div class="newShoe">
            <div class="newBox1">
                <p>친환경 스니커즈 아이보리</p>
                <a href="detail.html">
                <img class="img1" src="./img/스니커즈1-1.jpg">
                </a>
                <p>79,000원</p><br>
            </div>

            <div class="newBox2">
                <p>EARTH 친환경 스니커즈 올베이지</p>
                <a href="detail.html"></a>
                <img class="img2" src="./img/스니커즈2-1.png">
                <p>89,000원</p><br>
            </div>

            <div class="newBox3">
                <p>친환경 스니커즈 생지화이트</p>
                <a href="detail.html"></a>
                <img class="img3" src="./img/스니커즈3-1.png">
                <p>79,000원</p><br>
            </div>

            <div class="newBox3">
                <p>친환경 스니커즈 생지화이트</p>
                <a href="detail.html"></a>
                <img class="img3" src="./img/스니커즈4-1.png">
                <p>79,000원</p><br>
            </div>

            <div class="newBox3">
                <p>친환경 스니커즈 생지화이트</p>
                <a href="detail.html"></a>
                <img class="img3" src="./img/운동화1-1.png">
                <p>79,000원</p><br>
            </div>

            <div class="newBox3">
                <p>친환경 스니커즈 생지화이트</p>
                <a href="detail.html"></a>
                <img class="img3" src="./img/스니커즈5-1.webp">
                <p>79,000원</p><br>
            </div>

        </div>

    </div>
    </div>

</body>
</html>

<script>
    const url = new URL(window.location.href);
    const urlParams = url.searchParams;

    $.ajax({
      url: 'http://localhost:8090/api/authenticate',
      async: true, // false 일 경우 동기 요청으로 변경
      type: 'get', // POST, GET, PUT
      dataType: 'json', // text, xml, json, script, html
      data: {
          "size": 10,
          "page": urlParams.get('page'),
          "sort": "desc"
      },
      beforeSend: function (res) {}, // 요청하기 전에 호출
      success: function (res) {
          $('.add').detach();
          let result = ""
          res.map((data) => {
              console.log(data);
              result += '<tr class="add"><td>' + data.id +
                  '</td><td><a href="communityview.html/' + data.username + '/' + data.id + '">' +
                  data.title +
                  '</a></td><td>' +
                  '</td><td>' + data.regdate + '</td>< /tr>';
          })
          $('#ftr').after(result)
      }, // 요청 완료 시
      error: function (res) {
          console.log(res);
      }, // 요청 실패 시
      complete: function (res) {} // 요청 결과 상관 없이 무조건 호출
  });   
</script>